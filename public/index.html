<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Dibujo Colaborativo</title>
</head>

<body>
  <canvas id="canvas1" width="800" height="600"></canvas>
  <script>
    const canvas1 = document.getElementById('canvas1');
    const ctx1 = canvas1.getContext('2d');
    const drawingSocket1 = new WebSocket('ws://localhost:3000/session1'); // Cambia la dirección y el puerto si es necesario.

    let isDrawing1 = false;
    let lastX1 = 0;
    let lastY1 = 0;

    canvas1.addEventListener('mousedown', startDrawing1);
    canvas1.addEventListener('mousemove', draw1);
    canvas1.addEventListener('mouseup', stopDrawing1);

    function startDrawing1(e) {
      isDrawing1 = true;
      [lastX1, lastY1] = [e.offsetX, e.offsetY];
    }

    function draw1(e) {
      if (!isDrawing1) return;

      ctx1.beginPath();
      ctx1.moveTo(lastX1, lastY1);
      ctx1.lineTo(e.offsetX, e.offsetY);
      ctx1.stroke();

      // Enviar los trazos al servidor WebSocket (Sesión de Dibujo 1)
      const message = {
        type: 'draw',
        data: {
          session: 'session1', // Identifica la sesión de dibujo
          startX: lastX1,
          startY: lastY1,
          endX: e.offsetX,
          endY: e.offsetY,
        },
      };
      drawingSocket1.send(JSON.stringify(message));

      [lastX1, lastY1] = [e.offsetX, e.offsetY];
    }

    function stopDrawing1() {
      isDrawing1 = false;
    }
  </script>

</body>

</html>